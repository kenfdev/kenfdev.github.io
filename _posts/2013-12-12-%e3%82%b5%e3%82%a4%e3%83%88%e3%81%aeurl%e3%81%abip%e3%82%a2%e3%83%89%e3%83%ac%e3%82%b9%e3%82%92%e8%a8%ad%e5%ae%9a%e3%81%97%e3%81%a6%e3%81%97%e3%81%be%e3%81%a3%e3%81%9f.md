---
title: サイトのURLにIPアドレスを設定してしまった
author: kenev
layout: post
permalink: /2013/12/12/%e3%82%b5%e3%82%a4%e3%83%88%e3%81%aeurl%e3%81%abip%e3%82%a2%e3%83%89%e3%83%ac%e3%82%b9%e3%82%92%e8%a8%ad%e5%ae%9a%e3%81%97%e3%81%a6%e3%81%97%e3%81%be%e3%81%a3%e3%81%9f/
categories:
  - wordpress
tags:
  - ip
  - vmware-fusion
  - wordpress
---
最近は帰ってくるのが遅いので平日は家でほとんど何もできません。

今日もwordpressは何も進めることができなさそうなので、

昨日行った環境設定の備忘録を残しておきます。

&nbsp;

CentOSは特に苦労することもなく簡単にVMWare Fusionにインストールできました。

LAMPをインストールする手順が特になかったのでyumでインストール後、

マニュアル通りにwordpress用のDBを作成。

&nbsp;

VMWareの外からもテスト用のサイトを覗けるようにしたかったので

サイトURLにlocalhostではなくIPアドレスを設定したところ、大失敗。

&nbsp;

VMWareのIPアドレスはデフォルトでは、

スリープした拍子なのかなんなのか、IPアドレスが変わります。

これがwordpressのサイトURLにIPアドレスを設定した後に発生してしまった為、

どこからもwordpressにアクセスできなくなってしまいました。

全部URL変わってしまいますものね。当然のことです。

&nbsp;

困った困ったと嘆いて修復方法をstack先生に問合せたところ

[このスレ][1]を発見。

ようは、DBの中身を直接変えてあげればいいよ、という内容。

実際に以下のコマンドをmysqlにて実行してみた

<pre class="lang:mysql decode:true crayon-selected">Select * FROM wp_options WHERE option_id = 1 OR option_id = 39;</pre>

すると、以下の結果が。  
+&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;&#8212;&#8212;+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;-+  
| option\_id | option\_name | option_value | autoload |  
+&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;&#8212;&#8212;+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;-+  
| 1 | siteurl | http://172.16.174.156 | yes |  
| 39 | advanced_edit | 0 | yes |  
+&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;&#8212;&#8212;+&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;+&#8212;&#8212;&#8212;-+  
2 rows in set (0.00 sec)

&nbsp;

あぁ、しっかりIPアドレスで登録されてます。お恥ずかしい。。。

なので、以下のUPDATE文でとりあえずlocalhostに戻しました。

<pre class="lang:mysql decode:true">UPDATE wp_options SET option_value='http://localhost' WHERE option_id=1;</pre>

&nbsp;

無事にVM内から再びアクセス可能になりました。

ということでようやくスタートに戻ってきただけです。

 [1]: http://stackoverflow.com/questions/535534/wordpress-host-ip-changed