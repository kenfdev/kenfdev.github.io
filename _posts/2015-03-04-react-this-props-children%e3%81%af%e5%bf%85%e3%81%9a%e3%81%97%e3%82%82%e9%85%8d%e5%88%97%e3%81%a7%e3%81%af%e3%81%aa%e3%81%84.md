---
title: 'React &#8211; this.props.childrenは必ずしも配列ではない'
author: kenev
layout: post
permalink: /2015/03/04/react-this-props-children%e3%81%af%e5%bf%85%e3%81%9a%e3%81%97%e3%82%82%e9%85%8d%e5%88%97%e3%81%a7%e3%81%af%e3%81%aa%e3%81%84/
categories:
  - JavaScript
  - React.js
  - Web-dev
tags:
  - array
  - child-component
  - javascript
  - react
  - React.Children
  - react.js
  - this.props.children
  - utility
---
　**this.props.children**が必ずしも配列ではない、ということにドキュメントを読んでいて初めて気づきました。子要素が**1個**しかない場合には配列ではなく、値そのものが設定されます。ネーミングからしてそれはどうなんだ…と思いますが、配列を初期化するコストを削減しているようですね。「[Type of the Children props][1]」でちゃんと解説されています。

　「その為に[React.Children utilities][2]を用意してるんだよ！」とも記載されているのですが、実際に試してみたので結果をJSFiddleで御覧ください。

　React.Children.countをちゃんと使えば個数はちゃんと「1」と出力されますが、`this.props.children.length`を使ってしまうと「hello」の5文字として認識されて「5」が出力されてしまうのです。地味にひっかかりそうなトラップなので覚えておかないと…。

 [1]: http://facebook.github.io/react/tips/children-props-type.html
 [2]: http://facebook.github.io/react/docs/top-level-api.html#react.children